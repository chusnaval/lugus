<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<title th:text="${person.nombre}"></title>
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
	crossorigin="anonymous"></script>

<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet" crossorigin="anonymous">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
	crossorigin="anonymous" referrerpolicy="no-referrer" />
<link th:href="@{/css/lugus.css}" rel="stylesheet">
<link th:href="@{/css/botones.css}" rel="stylesheet">

<script defer="defer" type="text/javascript" th:src="@{/js/createPetition.js}"></script>

</head>
<body class="container mt-4">
	<div th:replace="~{layout/header :: header}"></div>

	<h2 th:text="${person.nombre}">Name</h2>

	<table th:unless="${films.empty}" class="table table-sm">
		<tbody>
			<tr th:each="f : ${films}">

				<td><a th:if="${f.peliculaId!=null}"
					th:href="@{'/peliculas/' + ${f.peliculaId}}"
					style="color: inherit;"><i
						th:class="${f.comprado ? 
                 'fas fa-check-circle text-success col-1' : 
                 (f.buscado ? 
                     'fas fa-exclamation-circle text-warning col-1' : 
                     'far fa-times-circle text-danger col-1')}"
						th:classappend="${f.peliculaId==null} ? 'link-disabled'"
						th:attr="aria-disabled=${f.peliculaId==null}" aria-hidden="true"></i>
				</a> <a th:id="${'pet_' + f.tconst}" th:if="${f.peliculaId==null}"
					data-bs-toggle="modal" data-bs-target="#confirmModal"
					th:data-bs-whatever="${f.tconst}" style="color: inherit;"><i
						class="far fa-times-circle text-danger col-1 peticion"
						aria-hidden="true"></i> </a></td>

				<td th:text="${f.title}"><input type="hidden"
					th:value="${f.id}" /> <input type="hidden" th:value="${f.nconst}" />
					<input type="hidden" th:value="${f.nconst}" /></td>
				<td th:text="${f.startyear}"></td>
				<td th:text="${f.category}"></td>
				<td th:text="${f.job}"></td>
			</tr>
		</tbody>
	</table>


	<button type="button" id="backButton" onclick="history.back()" title="Volver">Volver</button>

	<div class="modal fade" id="confirmModal" tabindex="-1"
		aria-labelledby="confirmModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content bg-dark text-white">
				<div class="modal-header bg-dark text-white">
					<h5 class="modal-title" id="confirmModalLabel">Confirmación
						requerida</h5>
					<button type="button" class="btn-close btn-close-white"
						data-bs-dismiss="modal" aria-label="Cerrar"></button>
				</div>
				<div class="modal-body">Se va a crear una petición.</div>
				<div class="modal-footer">
					<form th:action="@{/peliculas/petition/}">
						<button type="button" class="btn btn-secondary"
							data-bs-dismiss="modal" id="cancelBtn">Cancelar</button>
						<button class="btn btn-secondary"
							data-bs-dismiss="modal" id="acceptBtn">Aceptar</button>
					</form>
				</div>
			</div>
		</div>
	</div>

</body>
</html>