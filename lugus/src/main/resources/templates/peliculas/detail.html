<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<title th:text="${pelicula.titulo}">Lugus</title>
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
	crossorigin="anonymous"></script>

<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet" crossorigin="anonymous">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
	crossorigin="anonymous" referrerpolicy="no-referrer" />
<link th:href="@{/css/lugus.css}" rel="stylesheet">
<link th:href="@{/css/botones.css}" rel="stylesheet">
</head>
<body class="container mt-4">
	<div th:replace="~{layout/header :: header}"></div>

	<h2 th:text="${pelicula.titulo}">Título</h2>

	<div class="row  g-3 align-items-stretch">

		<div class="col-4 d-flex">
			<img th:if="${pelicula.tieneCaratula == false}"
				src="../image/placeholder.png" class="img-thumbnail cover-img"
				alt="Caratula" /> <img th:if="${pelicula.tieneCaratula == true}"
				th:src="@{/peliculas/{id}/image(id=${pelicula.id})}"
				class="img-thumbnail cover-img" alt="Caratula" />
		</div>
		<div th:if="${hasTrailer}"
			class="col-8 flex-grow-1 video-wrapper d-flex">

			<video th:if="${hasTrailer}" controls preload="metadata" width="100%"
				th:data-filename="${pelicula.id}">
				<source th:src="@{'/peliculas/trailer/' + ${pelicula.id}}"
					type="video/mp4">
				Tu navegador no soporta la etiqueta
			</video>
		</div>
	</div>
	<div class="row">
		<ul class="list-group mb-4 col-8">
			<li class="list-group-item row"><strong class="col-3">Año:</strong>
				<span class="col-9" th:text="${pelicula.anyo}"></span></li>
			<li class="list-group-item row"><strong class="col-3">Formato:</strong>
				<span class="col-9" th:text="${pelicula.formato}"></span></li>
			<li class="list-group-item row"><strong class="col-3">Género:</strong>
				<span class="col-9" th:text="${pelicula.genero.displayName}"></span></li>
			<li class="list-group-item row"><strong class="col-3">Steelbook:</strong><i
				th:class="${pelicula.steelbook == true? 'fas fa-check-circle text-success col-1' : 'far fa-times-circle text-danger col-1'}"
				aria-hidden="true"></i><strong class="col-3">Funda</strong><i
				th:class="${pelicula.funda == true? 'fas fa-check-circle text-success col-1' : 'far fa-times-circle text-danger col-1'}"
				aria-hidden="true"></i><strong class="col-3">Comprado:</strong><i
				th:class="${pelicula.comprado == true? 'fas fa-check-circle text-success col-1' : 'far fa-times-circle text-danger col-1'}"
				aria-hidden="true"></i> <strong class="col-3">Visto:</strong><i
				th:class="${pelicula.otros!= null && pelicula.otros.vista == true? 'fas fa-check-circle text-success col-1' : 'far fa-times-circle text-danger col-1'}"
				aria-hidden="true"></i></li>

			<li class="list-group-item row"><strong class="col-3"><img
					th:src="@{/image/IMDb_Logo.png}" class="imdb_logo_detail"
					alt="IMDb Rating"></strong><span class="col-3"
				th:if="${pelicula.otros}"
				th:text="${pelicula.otros.ratingFormatted}"></span> <strong
				class="col-3">Letterboxd</strong><span class="col-3"
				th:if="${pelicula.otros}" th:text="${pelicula.otros.lbRating}"></span>

			</li>

			<li class="list-group-item row"><strong class="col-3">Código
					interno:</strong> <span class="col-9" th:text="${pelicula.codigo}"></span></li>
			<li class="list-group-item row"><strong class="col-3">Localización:</strong>
				<span class="col-9" th:if="${pelicula.localizacion}"
				th:text="${pelicula.localizacion.descripcion}"></span></li>
		</ul>
	</div>

	<div th:if="${!grupos.empty}">
		<h4>Grupos</h4>
		<table class="table table-sm">
			<tbody>
				<tr th:each="g : ${grupos}">

					<td><a th:href="@{/group/{id}(id=${g.group.id})}"
						class="text-decoration-none d-block custom-card-link fixed-height"
						style="color: inherit;"> <i class="fa-solid fa-angle-right"></i></a></td>
					<td th:text="${g.group.name}"></td>	
				</tr>
			</tbody>
		</table>
	</div>

	<div th:if="${pelicula.padre != null}">
		<h4>Esta película esta incluida al pack:</h4>
		<a th:href="@{'/peliculas/' + ${pelicula.padre.id}}"
			class="btn btn-sm btn-outline-primary"
			th:text="${pelicula.padre.titulo}">Ver</a>
	</div>


	<hr />
	<div th:if="${pelicula.pack}">
		<h4>Películas del pack</h4>
		<div th:if="${pelicula.peliculasPack.empty}">
			<em>Este pack no contiene películas.</em>
		</div>
		<table th:unless="${pelicula.peliculasPack.empty}"
			class="table table-sm">
			<thead>
				<tr>
					<th>Título</th>
					<th>Año</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="h : ${pelicula.peliculasPack}">
					<td th:text="${h.titulo}"></td>
					<td class="text-end"><a th:href="@{'/peliculas/' + ${h.id}}"
						class="btn btn-sm btn-outline-primary">Ver</a></td>
					<td th:text="${h.anyo}"></td>
				</tr>
			</tbody>
		</table>

	</div>
	<br />

	<h4>Reparto:</h4>

	<div th:if="${pelicula.pack == false}" class="row">
		<div class="col-2">
			<span>Director/a:</span>
			<div th:if="${directores.empty}">No tenemos ese dato aún.</div>
			<table th:unless="${directores.empty}" class="table table-sm">
				<tbody>
					<tr th:each="dir : ${directores}">
						<td><a th:href="@{/filmography/{id}(id=${dir.persona})}"
							style="color: inherit;"> <i class="fa-solid fa-angle-right"></i>
						</a></td>
						<td th:text="${dir.nombre}"></td>
					</tr>
				</tbody>
			</table>
		</div>
		<div class="col-6">
			<span>Interpretes:</span>
			<div th:if="${actores.empty}">No tenemos ese dato aún.</div>
			<table th:unless="${actores.empty}" class="table table-xl">
				<tbody>
					<tr th:each="act : ${actores}">
						<td><a th:href="@{/filmography/{id}(id=${act.persona})}"
							style="color: inherit;"> <i class="fa-solid fa-angle-right"></i>
						</a></td>
						<td th:text="${act.nombre}"></td>
						<td th:text="${act.personaje}"></td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	<hr />

	<br />
	<br />
	<h4>Notas:</h4>
	<span th:text="${pelicula.notas}"></span>


	<form th:action="@{/peliculas/volver}" method="post">
		<button type="submit" id="floatBtn" title="Volver">Volver</button>
	</form>

</body>
</html>