<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<title th:text="${serie.titulo}">Detalle</title>
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
	crossorigin="anonymous"></script>

<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet" crossorigin="anonymous">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
	crossorigin="anonymous" referrerpolicy="no-referrer" />
<link th:href="@{/css/lugus.css}" rel="stylesheet">
<link th:href="@{/css/botones.css}" rel="stylesheet">


</head>
<body class="container mt-4">
	<div th:replace="~{layout/header :: header}"></div>

	<form
		th:action="@{/series/actualizar/{id}(id=${serie.id})}"
		th:object="${nuevo}" method="post">
		<h2 th:text="${serie.titulo}">Título</h2>
		<input type="hidden" id="idSerie" th:value="${serie.id}">

		<div class="row">
			<ul class="list-group mb-4 col-8">
				<li class="list-group-item row"><strong class="col-3">Título:</strong>
					<input type="text" id="campoTitulo" th:value="${serie.titulo}"
					th:field="*{titulo}"></li>

				<li class="list-group-item row"><strong class="col-3">Título
						para Gestión:</strong> <input type="text" th:value="${serie.tituloGest}"
					th:field="*{tituloGest}"></li>

				<li class="list-group-item row"><strong class="col-3">Año Inicio:</strong>
					<input type="text" th:value="${serie.anyoInicio}" th:field="*{anyoInicio}"
					maxlength="4"></li>

				<li class="list-group-item row"><strong class="col-3">Año Fin:</strong>
					<input type="text" th:value="${serie.anyoFin}" th:field="*{anyoFin}"
					maxlength="4"></li>
					
				<li class="list-group-item row"><strong class="col-3">Formato:</strong>
					<select class="form-select" th:field="*{formatoCodigo}">
						<option th:each="f : ${T(lugus.model.Formato).valoresOrdenados()}"
							th:value="${f.id}" th:text="${f}"
							th:selected="${serie.formato.id == f.id}"></option>
				</select></li>
				<li class="list-group-item row"><strong class="col-3">Género:</strong>
					<select class="form-select" th:field="*{generoCodigo}">
						<option th:each="g : ${T(lugus.model.Genero).valoresOrdenados()}"
							th:value="${g.codigo}" th:text="${g.displayName}"
							th:selected="${serie.genero.codigo == g.codigo}"></option>
				</select></li>

				<li class="list-group-item row"><strong class="col-3">Comprado:</strong>
					<input type="checkbox" th:value="${serie.comprado}"
					th:field="*{comprado}"></li>
					<li class="list-group-item row"><strong class="col-3">Completa:</strong>
					<input type="checkbox" th:value="${serie.completa}"
					th:field="*{completa}"></li>
				<li class="list-group-item row"><strong class="col-3">Localización:</strong>
					<select class="form-select" th:field="*{localizacionCodigo}">
						<option value=""></option>
						<option th:each="l : ${localizaciones}" th:value="${l.codigo}"
							th:text="${l.descripcion}"></option>
				</select></li>
				<li class="list-group-item row"></li>
				<li class="list-group-item row">
					<div class="col-5">
						<i class="fa-solid fa-plus btn btn-sm btn-success"
							id="openModalBtnDir" data-bs-toggle="modal"
							data-bs-target="#personModal"></i><strong>Director/a:</strong>
					</div>

					<table id="tablaDirectores">
						<tr th:each="d, iStat : ${directores}">

							<td><input type="hidden" id="'key_"
								th:value="${d.persona}" /> <input type="hidden"
								id="nuevo_" th:value="false" /> <input
								type="hidden" id="borrado_" th:value="false" /> <span
								id="nombre_" th:text="${d.nombre}"></span></td>
							<td><i id="del_"
								class="fa-solid fa-delete-left btn btn-sm btn-danger"></i></td>
						</tr>
					</table>
				</li>

				<li class="list-group-item row">
					<div class="col-5">
						<i class="fa-solid fa-plus btn btn-sm btn-success"
							data-bs-toggle="modal" data-bs-target="#personModal"></i><strong>Interpretes:</strong>
					</div>

					<table id="tablaInterpretes">
						<tr th:each="d, iStat : ${actores}">

							<td><input type="hidden" id="key_${d.persona}"
								th:value="${d.persona}" /> <input type="hidden"
								id="nuevo_${d.persona}" th:value="false" /> <input
								type="hidden" id="borrado_${d.persona}" th:value="false" /> <span
								id="nombre_${d.persona}" th:text="${d.nombre}"></span></td>
							<td><i id="del_${d.persona}"
								class="fa-solid fa-delete-left btn btn-sm btn-danger"></i></td>
						</tr>
					</table>
				</li>

				<li class="list-group-item row"><strong class="col-3">Código
						interno:</strong> <input type="text" th:value="${serie.codigo}"
					maxlength="4" readonly="readonly" disabled="disabled"></li>
				<li class="list-group-item row"><strong class="col-3">Notas:</strong>
					<textarea th:value="${serie.notas}" th:field="${serie.notas}" maxlength="400"></textarea></li>
			</ul>



			<div class="col-3">
				<img id="caratulaImg" th:if="${serie.tieneCaratula == false}"
					src="../../image/placeholder.png" class="img-thumbnail"
					alt="Caratula" /> <img id="caratulaImg"
					th:if="${serie.tieneCaratula == true}"
					th:src="@{/series/{id}/image(id=${serie.id})}"
					class="img-thumbnail" alt="Caratula" />
			</div>
		</div>
		<br />
		<div class="col-md-2">
			<button type="submit" class="btn btn-primary w-100">Guardar</button>
		</div>
		<hr />
	</form>


	<h4>Añadir caratula</h4>
	<form id="formCaratula"
		th:action="@{'/series/' + ${serie.id} + '/caratula'}"
		method="post" th:object="${caratula}">
		<div class="row g-2">
			<div class="col-md-4">
				<input class="form-control" th:field="*{url}" placeholder="url" />
			</div>
			<div class="col-md-2">
				<select class="form-select" th:field="*{fuente}">
					<option th:each="f : ${fuentesList}" th:value="${f.id}"
						th:text="${f.descripcion}"></option>
				</select>
			</div>
			<div class="col-md-2">
				<button type="submit" class="btn btn-primary w-100">Añadir</button>
			</div>
		</div>
	</form>

	<form th:action="@{/series/volver}"
		method="post">
		<button type="submit" id="floatBtn" title="Volver">Volver</button>
	</form>



	<script src="/lugus/js/editSerie.js" defer="defer"></script>
</body>
</html>